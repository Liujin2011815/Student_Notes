###什么是波动光学？
**在 Comsol 中以电磁波的理论来仿真光，只考虑波动性，不考虑粒子性**
* 光频下的电磁波仿真（波长从nm到μm）
* 光学元器件经常远大于波长
    * 半导体激光器（5 x 5 x 500 μm3）
    * 定向耦合器（mm 长度）
###光学模块与RF模块比较
* RF模块适合模拟与波长大小相近的域(f=1HZ λ=30cm)
* 最大网格单元大小 hmax 必须是波长的一部分， hmax=λ/6
* 考虑半导体激光器案例
    * 体积为 5x5x500 = 12500 μm3
    * 材料内的波长为1.55/3.5=0.44μm => hmax=73nm
    * 单元数量为 12500/0.0733=31 000 000！
    * 仅部分网格就需要 25GB RAM！
###射线光学
* 射线光适合模拟远大于波长的结构
* 能够有效地追踪经过复杂几何域和材料的射线
* 近似方法：
  * 波长为0
  * 不考虑衍射效应
###Comsol Multiphysics 的工作流程
    1.定义需要求解的问题模型
    2.绘制或导入CAD模型
    3.定义每个求解域的材料属性
    4.设定载荷和边界条件
    5.网格剖分
    6.求解模型
    7.后处理和报告结果
    8.修改和优化
###Comsol APP 开发
    1.模型建完后，点击左上角 APP 开发器
    2.表单 --> 新建表单
    3.需要用到的输入输出参数添加
    4.添加需要看到的图形仿真结果
    5.添加按钮，如计算运行的按钮
    6.通过编辑器拖动窗口，布局
    7.完成，测试 APP
###Comsol 几何建模和 CAD 的导入
**1.几何内核**
作用：

    1.跟踪对象的数学表示
    2.具有构造对象及其相互作用的功能
    3.保证几何的关联性

在几何设置里的几何表示选项中更改
* COMSOL 内核
  * 对 COMSOL 中创建的几何效果最好
  * 包含在 Comsol Multiphysics 中
* CAD 内核
  * 对于导入的 CAD 对象效果最好，增加额外的几何操作功能
  * 包含在 CAD 导入模块，设计模块和其他 CAD 产品对应的 LiveLink 接口模块

**2.几何对象和实体**

几何模型是一个由体，面，曲线和点这些有界的几何实体的集合，最高维度的几何实体称为域，次高维度的几何实体称为边界
| 几何实体维度 | 三维模型 | 二维模型 | 一维模型 | 零维模型 |
| :-----: | :-----: | :----: | :----: | :----: |
| 三维 | 域 | 
| 二维 | 边界 | 域 |
| 一维 | 边 | 边界 | 域 |
| 零维 | 点 | 点 | 边界 | 域 |

**3.几何操作**
* 基本操作
  * 几何体素创建、布尔操作、转换、变换
* CAD 导入模块
  * 几何特征去除和修复、端盖面
* 设计模块
  * 放样、中面、厚度、圆角、倒角
* 操作中的输入数据均可基于参数，通过参数化和优化求解器进行控制

**4.通过 COMSOL 创建三维几何体**

    a.几何
    b.工作平面
    c.在工作平面建立二维的几何特征(特殊曲线可以用参数化创建多边形功能)
    d.通过拉伸、回转、扫掠创建三维几何特征

**5.COMSOL 从三维图中提取二维结构**

    a.有一个三维几何，在上面创建一个工作平面
    b.通过平面定义来定义一个平面用来截取三维图形的横截面
    c.添加一个二维组件
    d.右键，选择横截面
    e.构建选定对象就可以看到二维组件工作平面切成的横截面

**5.布尔操作**

将不同对象组合创建复合的几何体

    a.并集
    b.交集
    c.差集
    d.组合（全选对象的操作：单击一下图形窗口空白界面，同时 Ctrl + A)

**6.分割操作**

通过对象、工作面、面、边、点实现分割对象、域、边界、边以便于网格剖分等操作。网格剖分前一般需要对几何体分割域

**7.形成联合体和形成装配体**

* 形成联合体是为了让域连接，软件在封闭边界内会自动形成域，形成联合突击会影响到网格剖分
* 形成装配体是为了物理场仿真
  * 当两个对象形成接触时
    * 在形成装配体步骤产生接触对
    * 结构力学接触
  * 求解域绕其他域发生旋转(不同对象不用使用连续的网格)
    * 在形成装配体步骤产生一致对
    * 旋转电磁场（AC/DC Module）
    * 流体混合（搅拌器模块）
  * 其他一些可能强调在一致对和接触对上的连续性的物理场
    * 例如，由于结构接触使两个接触体之间传热
* 求解带旋度-旋度方程的物理场（例如Maxwell方程）避免使用装配体
  * 三维电磁波（RF和波动光学模块）
  * 所有的三维磁矢场方程（AC/DC模块）
  
**8.COMSOL 建模的建议**

COMSOL 建模几何一定要精确吗？  NO

* 处理角部细节：尖锐的直角在仿真中可能会出现数值上的歧义
* 简化处理不需要的细节
* 薄层结构：将薄层处理成一个边界条件，减少计算量
* 大尺度比例时考虑降维度
* 处理点接触：对于点接触，一般可以使用间隙或者重叠来取代，并分析间隙越来越小时的结果

**9. CAD 导入**

支持导入的主要文件格式：STEP、IGES、AutoCAD、proE、solidworks

选择什么样的文件？

* 有很多小的表面的CAD数据用 .stl 或 .vrml
* 裁剪的曲面数据用 .igs
* 边界表示（B-rep）数据用 .stp , .sat 或 .x_b

### 网格剖分

有限元基于几何离散化为最小的单元--网格单元。有限元网格用来表征几何和表征求解域。使用更多的网格单元通常意味着更精确的近似和求解，也意味着更长的求解时间和更多的内存需求。网格单元的大小和形状决定在数值稳定性方面能否获得良好的刚度矩阵.

绘制网格的一般步骤：
* 物理场控制网格，展开
* 再手动切换到用户控制网格
* 再调整

### 研究类型以及求解器









